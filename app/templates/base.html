<!DOCTYPE html>
<html lang="{{ g.locale or 'en' }}" data-bs-theme="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description"
              content="Capture your thoughts securely with our Simple Notes App.">
        <title>
            {% block title %}{% endblock %}
        â€¢ {{ _("Notes App") }}</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap"
              rel="stylesheet">
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet"
              href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
        <style>
        :root { --bs-body-font-family: "Google Sans", sans-serif; }
        body { min-height: 100vh; display: flex; flex-direction: column; }
        main { flex: 1; }
        .alert { border: none; border-radius: 12px; }
        </style>
        {% block styles %}{% endblock %}
    </head>
    <body>
        {% include "partials/_navbar.html" %}
        <main class="container my-5">
            <div id="flash-messages">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category if category != 'message' else 'info' }} alert-dismissible fade show shadow-sm"
                                 role="alert">
                                <i class="bi {% if category == 'success' %}bi-check-circle{% elif category == 'danger' %}bi-exclamation-triangle{% else %}bi-info-circle{% endif %} me-2"></i>
                                {{ message }}
                                <button type="button"
                                        class="btn-close"
                                        data-bs-dismiss="alert"
                                        aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>
            {% block content %}{% endblock %}
        </main>
        <footer class="py-4 mt-auto border-top border-secondary-subtle">
            <div class="container text-center">
                <p class="text-muted small mb-0">
                    &copy; 2026 {{ _("Notes App") }}. {{ _("Made with") }} <i class="bi bi-heart-fill text-danger"></i>
                </p>
            </div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        {# Only load CKEditor if the block is called in a form template #}
        {% if ckeditor is defined %}
            {{ ckeditor.load() }}
            {{ ckeditor.config(name="content") }}
        {% endif %}
        <script src="{{ url_for('static', filename='js/main.js') }}"></script>
        {% block scripts %}{% endblock %}
    </body>
</html>
